{"ast":null,"code":"import axios from 'axios';\nexport const LOGIN_USER = \"LOGIN_USER\";\nexport const REGISTER_USER = \"REGISTER_USER\";\nexport const GET_USER = \"GET_USER\";\nexport const CLEAR_USERGAME = \"CLEAR_USERGAME\"; // export const DELETED_GAME_USER = \"DELETED_GAME_USER\";\n\nexport function auth(payload) {\n  const urlLog = `http://localhost:3001/auth/login`;\n  return async function (dispatch) {\n    try {\n      const rta = await axios.post(urlLog, payload);\n      const log = rta.data;\n      console.log(log);\n\n      if (log.message === 'Unauthorized') {\n        return;\n      } else {\n        localStorage.setItem('token', log.token);\n        localStorage.setItem('payload', log.payload.role);\n        localStorage.setItem('id', log.payload.sub);\n        return {\n          type: LOGIN_USER,\n          log\n        };\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n}\nexport function register(payload) {\n  const urlLog = `http://localhost:3001/users`;\n  return async function (dispatch) {\n    try {\n      const rta = await axios.post(urlLog, payload);\n      const log = rta.data;\n      console.log(log);\n      localStorage.setItem('token', log.token);\n      localStorage.setItem('payload', log.payload.role);\n      localStorage.setItem('id', log.payload.sub);\n      return {\n        type: REGISTER_USER,\n        log\n      };\n    } catch (error) {\n      console.log(error);\n    }\n  };\n}\nexport function getUser(id) {\n  const urlUser = `http://localhost:3001/users/`;\n  return async function (dispatch) {\n    try {\n      const rta = await axios.get(urlUser + id);\n      const user = rta.data; // console.log(user)\n\n      return dispatch({\n        type: GET_USER,\n        payload: user\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n}\nexport function destroyGame(id, token) {\n  const urlDeleted = `http://localhost:3001/videogames/`;\n  return async function (dispatch) {\n    try {\n      await axios.delete(urlDeleted + id, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n}\nexport function uploadGame(id, payload, token) {\n  const urlUpload = `http://localhost:3001/videogames/`;\n  return async function (dispatch) {\n    try {\n      await axios.patch(urlUpload + id, payload, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      console.log(\"ACTUALIZADO\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n}\nexport function clearData() {\n  return {\n    type: CLEAR_USERGAME,\n    payload: []\n  };\n}","map":{"version":3,"names":["axios","LOGIN_USER","REGISTER_USER","GET_USER","CLEAR_USERGAME","auth","payload","urlLog","dispatch","rta","post","log","data","console","message","localStorage","setItem","token","role","sub","type","error","register","getUser","id","urlUser","get","user","destroyGame","urlDeleted","delete","headers","uploadGame","urlUpload","patch","clearData"],"sources":["/home/ciro/Escritorio/Ciro/videogames-main/client-videogames/src/actions/users.js"],"sourcesContent":["import axios from 'axios';\n\nexport const LOGIN_USER = \"LOGIN_USER\";\nexport const REGISTER_USER = \"REGISTER_USER\";\nexport const GET_USER = \"GET_USER\";\nexport const CLEAR_USERGAME = \"CLEAR_USERGAME\";\n// export const DELETED_GAME_USER = \"DELETED_GAME_USER\";\n \nexport function auth(payload){\n    const urlLog = `http://localhost:3001/auth/login`;\n   return async function(dispatch){\n       try {   \n            const rta = await axios.post(urlLog, payload)\n            const log = rta.data;\n            console.log(log)\n\n            if( log.message === 'Unauthorized' ) {\n                return\n            } else {\n\n                localStorage.setItem('token', log.token)\n                localStorage.setItem('payload', log.payload.role)\n                localStorage.setItem('id', log.payload.sub)\n                return {\n                    type: LOGIN_USER,\n                    log\n                }\n\n            }\n       } catch (error) {\n           console.log(error)\n       }\n   }\n}\n\nexport function register(payload){\n    const urlLog = `http://localhost:3001/users`;\n   return async function(dispatch){\n       try {   \n            const rta = await axios.post(urlLog, payload)\n            const log = rta.data;\n            console.log(log)\n\n            localStorage.setItem('token', log.token)\n            localStorage.setItem('payload', log.payload.role)\n            localStorage.setItem('id', log.payload.sub)\n            return {\n                type: REGISTER_USER,\n                log\n            }\n       } catch (error) {\n           console.log(error)\n       }\n   }\n}\n \nexport function getUser(id){\n    const urlUser = `http://localhost:3001/users/`;\n   return async function(dispatch){\n       try {   \n            const rta = await axios.get(urlUser+id)\n            const user = rta.data;\n            // console.log(user)\n            return dispatch({\n                type: GET_USER,\n                payload: user\n            }) \n       } catch (error) {\n           console.log(error)\n       }\n   }\n}\n\nexport function destroyGame(id, token) {\n    const urlDeleted = `http://localhost:3001/videogames/`;\n    return async function(dispatch){\n        try {\n            await axios.delete(urlDeleted+id, {\n                headers: {\n                    'Authorization': `Bearer ${token}`\n                }\n            })\n            \n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n}\n\nexport function uploadGame(id, payload, token) {\n    const urlUpload = `http://localhost:3001/videogames/`;\n    return async function(dispatch){\n        try {\n            await axios.patch(urlUpload+id, payload, {\n                headers: {\n                    'Authorization': `Bearer ${token}`\n                }\n            })\n            console.log(\"ACTUALIZADO\")\n        } catch (error) {\n            console.log(error)\n        }\n    }\n}\n\n\nexport function clearData() {\n    return {\n        type: CLEAR_USERGAME,\n        payload: []\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}